{"version":3,"sources":["../src/script_closed_loop_request_link_update.js"],"names":["renderTemplate","responseData","element","document","getElementById","Templates","renderForPromise","then","html","js","replaceNode","catch","loopRequest","courseid","Ajax","call","methodname","args","done","fail","Notification","exception","setTimeout","init"],"mappings":"ygBAqBA,OACA,OACA,O,siBAOA,QAASA,CAAAA,CAAT,CAAwBC,CAAxB,CAAqC,CAEjC,GAAIC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,kCAAxB,CAAd,CACA,GAAGF,CAAH,CAAW,CACPG,CAAS,CAACC,gBAAV,CAA2B,uCAA3B,CAAoEL,CAApE,EACEM,IADF,CACO,WAAgB,IAAdC,CAAAA,CAAc,GAAdA,IAAc,CAARC,CAAQ,GAARA,EAAQ,CACnBJ,CAAS,CAACK,WAAV,CAAsBR,CAAtB,CAA+BM,CAA/B,CAAqCC,CAArC,CACF,CAHF,EAGIE,KAHJ,EAIH,CAEJ,CAMD,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAA8B,CAEzBC,CAAI,CAACC,IAAL,CAAU,CAAC,CACRC,UAAU,CAAE,yCADJ,CAERC,IAAI,CAAE,CAACJ,QAAQ,CAAEA,CAAX,CAFE,CAGRK,IAAI,CAAE,cAASjB,CAAT,CAAuB,CACrBD,CAAc,CAACC,CAAD,CACjB,CALG,CAMRkB,IAAI,CAAEC,CAAY,CAACC,SANX,CAAD,CAAV,EAQCC,UAAU,CAACV,CAAD,CAAc,GAAd,CATFC,CASE,CACf,C,OAOmB,QAAPU,CAAAA,IAAO,CAACV,CAAD,CAAc,CAE9B,GAAIX,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,kCAAxB,CAAd,CACA,GAAGF,CAAH,CAAW,CACPU,CAAW,CAACC,CAAD,CACd,CAEJ,C","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Update button for analyzing if new requests are available\n * @copyright  2022 Rene Hilgemann\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Templates from 'core/templates';\nimport * as Notification from 'core/notification';\nimport * as Ajax from 'core/ajax';\n\n\n/**\n * Update block for teacher\n * @param {Array} responseData\n */\nfunction renderTemplate(responseData){\n\n    var element = document.getElementById('Request_Overview_content_teacher');\n    if(element){\n        Templates.renderForPromise('block_closed_loop_support/requestLink', responseData)\n         .then(({html, js}) => {\n            Templates.replaceNode(element, html, js);\n         }).catch();\n    }\n\n}\n\n/**\n * Loop function\n * @param {Integer} courseid\n */\nfunction loopRequest(courseid){\n     var id = courseid;\n     Ajax.call([{\n        methodname: 'block_closed_loop_support_read_requests',\n        args: {courseid: courseid},\n        done: function(responseData) {\n                renderTemplate(responseData);\n            },\n        fail: Notification.exception\n      }]);\n      setTimeout(loopRequest, 3000, id);\n}\n\n/**\n * Setting up\n * @param {Integer} courseid\n */\n\nexport const init = (courseid) => {\n\n    var element = document.getElementById('Request_Overview_content_teacher');\n    if(element){\n        loopRequest(courseid);\n    }\n\n};\n\n"],"file":"script_closed_loop_request_link_update.min.js"}