{"version":3,"sources":["../src/script_closed_loop_list_reload.js"],"names":["renderTemplate","responseList","element","document","getElementById","innerHTML","loopReload","courseid","oldNumber","oldNum","elements","getElementsByClassName","length","getElementsByTagName","Ajax","call","methodname","args","done","fail","Notification","exception","setTimeout","init"],"mappings":"wdAqBA,O,siBAMA,QAASA,CAAAA,CAAT,CAAwBC,CAAxB,CAAqC,CAEjC,GAAIC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAAd,CACA,GAAGF,CAAH,CAAW,CACPA,CAAO,CAACG,SAAR,CAAoBJ,CACvB,CACJ,CAQD,QAASK,CAAAA,CAAT,CAAoBC,CAApB,CAA8BC,CAA9B,CAAwC,IAC/BC,CAAAA,CAAM,CAAGD,CADsB,CAG/BE,CAAQ,CAAGP,QAAQ,CAACQ,sBAAT,CAAgC,gBAAhC,CAHoB,CAInC,GAAqB,CAAlB,CAAAD,CAAQ,CAACE,MAAZ,CAAuB,CACnB,GAAGF,CAAQ,CAAC,CAAD,CAAR,CAAYG,oBAAZ,CAAiC,IAAjC,EAAuCD,MAAvC,GAAkDH,CAArD,CAA4D,CACrDA,CAAM,CAAGC,CAAQ,CAAC,CAAD,CAAR,CAAYG,oBAAZ,CAAiC,IAAjC,EAAuCD,MAAhD,CACAE,CAAI,CAACC,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,iDADL,CAEPC,IAAI,CAAE,CAACV,QAAQ,CAAEA,CAAX,CAFC,CAGPW,IAAI,CAAE,cAASjB,CAAT,CAAuB,CACrBD,CAAc,CAACC,CAAD,CACjB,CALE,CAMPkB,IAAI,CAAEC,YAAY,CAACC,SANZ,CAAD,CAAV,CAQN,CACJ,CACDC,UAAU,CAAChB,CAAD,CAAa,GAAb,CAfDC,CAeC,CAAuBE,CAAvB,CACd,C,OAQmB,QAAPc,CAAAA,IAAO,CAAChB,CAAD,CAAc,CAE7B,GAAIG,CAAAA,CAAQ,CAAGP,QAAQ,CAACQ,sBAAT,CAAgC,gBAAhC,CAAf,CACA,GAAqB,CAAlB,CAAAD,CAAQ,CAACE,MAAZ,CAAuB,CACnBN,CAAU,CAACC,CAAD,CAAWG,CAAQ,CAAC,CAAD,CAAR,CAAYG,oBAAZ,CAAiC,IAAjC,EAAuCD,MAAlD,CACb,CAEL,C","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reload the list if something happend (like li-count changes)\n * @copyright  2022 Rene Hilgemann\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Ajax from 'core/ajax';\n\n/**\n * Update block for teacher\n * @param {Var} responseList as html\n */\nfunction renderTemplate(responseList){\n\n    var element = document.getElementById('define_response_list');\n    if(element){\n        element.innerHTML = responseList;\n    }\n}\n\n\n/**\n * Loop function\n * @param {Integer} courseid\n * @param {Integer} oldNumber\n */\nfunction loopReload(courseid, oldNumber){\n     var oldNum = oldNumber;\n     var id = courseid;\n     var elements = document.getElementsByClassName('course-content');\n     if(elements.length > 0){\n         if(elements[0].getElementsByTagName('li').length !== oldNum){\n                oldNum = elements[0].getElementsByTagName('li').length;\n                Ajax.call([{\n                    methodname: 'block_closed_loop_support_get_responselist_html',\n                    args: {courseid: courseid},\n                    done: function(responseList) {\n                            renderTemplate(responseList);\n                        },\n                    fail: Notification.exception\n      }]);\n         }\n     }\n     setTimeout(loopReload, 1000, id, oldNum);\n}\n\n\n/**\n * Setting up\n * @param {Integer} courseid\n */\n\nexport const init = (courseid) => {\n\n     var elements = document.getElementsByClassName('course-content');\n     if(elements.length > 0){\n         loopReload(courseid, elements[0].getElementsByTagName('li').length);\n     }\n\n};"],"file":"script_closed_loop_list_reload.min.js"}