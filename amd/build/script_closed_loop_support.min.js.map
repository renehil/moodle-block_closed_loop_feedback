{"version":3,"sources":["../src/script_closed_loop_support.js"],"names":["data","courseID","buttonClickEvent","e","cmIDClicked","target","getAttribute","replace","Notification","addNotification","message","type","Ajax","call","methodname","args","cmID","done","fail","exception","renderTemplate","element","idNumber","Templates","renderForPromise","Text","ModulNumber","then","html","js","prependNodeContents","catch","init","courseWrapper","document","getElementsByClassName","addEventListener","i","getElementById"],"mappings":"6fAqBA,OACA,OACA,O,yiBAGMA,CAAAA,CAAI,CAAG,CACTC,QAAQ,CAAE,CAAC,CADF,C,CAKPC,CAAgB,CAAG,SAACC,CAAD,CAAM,CAE3B,GAAIC,CAAAA,CAAW,CAAGD,CAAC,CAACE,MAAF,CAASC,YAAT,CAAsB,IAAtB,EAA4BC,OAA5B,CAAoC,SAApC,CAA8C,EAA9C,CAAlB,CACAC,CAAY,CAACC,eAAb,CAA6B,CAC1BC,OAAO,CAAE,YAAeN,CADE,CAE1BO,IAAI,CAAE,MAFoB,CAA7B,EAKCC,CAAI,CAACC,IAAL,CAAU,CAAC,CACRC,UAAU,CAAE,oCADJ,CAERC,IAAI,CAAE,CAACd,QAAQ,CAAED,CAAI,CAACC,QAAhB,CAA0Be,IAAI,CAAEZ,CAAhC,CAFE,CAGRa,IAAI,CAAET,CAAY,CAACC,eAAb,CAA6B,CAACC,OAAO,CAAE,QAAV,CAAoBC,IAAI,CAAE,SAA1B,CAA7B,CAHE,CAIRO,IAAI,CAAEV,CAAY,CAACW,SAJX,CAAD,CAAV,CAQJ,C,CAQKC,CAAc,CAAG,SAACC,CAAD,CAAUC,CAAV,CAAuB,CAMtCC,CAAS,CAACC,gBAAV,CAA2B,sCAA3B,CALc,CACVC,IAAI,CAAE,MADI,CAEVC,WAAW,CAAEJ,CAFH,CAINI,WAJM,CAIQJ,CAJR,CAKd,EACSK,IADT,CACc,WAAgB,IAAdC,CAAAA,CAAc,GAAdA,IAAc,CAARC,CAAQ,GAARA,EAAQ,CAC1BN,CAAS,CAACO,mBAAV,CAA8BT,CAA9B,CAAuCO,CAAvC,CAA6CC,CAA7C,CACC,CAHL,EAGOE,KAHP,EAIP,C,QAMmB,QAAPC,CAAAA,IAAO,CAAC/B,CAAD,CAAc,CAC9BD,CAAI,CAACC,QAAL,CAAgBA,CAAhB,CAEA,GAAIgC,CAAAA,CAAa,CAAGC,QAAQ,CAACC,sBAAT,CAAgC,gBAAhC,CAApB,CACA,GAAGF,CAAH,CACA,CACIA,CAAa,CAAC,CAAD,CAAb,CAAiBG,gBAAjB,CAAkC,OAAlC,CAA2C,SAACjC,CAAD,CAAO,CAACD,CAAgB,CAACC,CAAD,CAAK,CAAxE,CACH,CAED,IAAI,GAAIkC,CAAAA,CAAC,CAAG,CAAR,CAEIhB,CAFR,CAAmB,EAAJ,CAAAgB,CAAf,CAAuBA,CAAC,EAAxB,CACA,CACQhB,CADR,CACkBa,QAAQ,CAACI,cAAT,CAAwB,UAAYD,CAApC,CADlB,CAEI,GAAGhB,CAAH,CACA,CACID,CAAc,CAACC,CAAD,CAAUgB,CAAV,CACjB,CAEJ,CAEJ,C","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module to display and manage reactions and difficulty tracks on course page.\n * @copyright  2022 Rene Hilgemann\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Templates from 'core/templates';\nimport * as Notification from 'core/notification';\nimport * as Ajax from 'core/ajax';\n\n\nconst data = {\n    courseID: -1\n};\n\n\nconst buttonClickEvent = (e) =>{\n\n    var cmIDClicked = e.target.getAttribute('id').replace('Module-','');\n    Notification.addNotification({\n       message: \"Clicked: \" +  cmIDClicked,\n       type: \"info\"\n     });\n\n     Ajax.call([{\n        methodname: 'block_closed_loop_support_external',\n        args: {courseID: data.courseID, cmID: cmIDClicked},\n        done: Notification.addNotification({message: \"Erfolg\", type: \"success\"}),\n        fail: Notification.exception\n      }]);\n\n\n};\n\n\n/**\n * Insert element\n * @param {Var} element\n * @param {Integer} idNumber\n */\nconst renderTemplate = (element, idNumber) => {\n        var context = {\n            Text: 'Help',\n            ModulNumber: idNumber\n        };\n        context.ModulNumber = idNumber;\n        Templates.renderForPromise('block_closed_loop_support/loopButton', context)\n                .then(({html, js}) => {\n            Templates.prependNodeContents(element, html, js);\n            }).catch();\n};\n\n/**\n * Setting up\n * @param {Integer} courseID\n */\nexport const init = (courseID) => {\n    data.courseID = courseID;\n\n    var courseWrapper = document.getElementsByClassName('course-content');\n    if(courseWrapper)\n    {\n        courseWrapper[0].addEventListener('click', (e) => {buttonClickEvent(e);});\n    }\n\n    for(let i = 1; i < 10; i++)\n    {\n        var element = document.getElementById('module-' + i);\n        if(element)\n        {\n            renderTemplate(element, i);\n        }\n\n    }\n\n};\n\n"],"file":"script_closed_loop_support.min.js"}